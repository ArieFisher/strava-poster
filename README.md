# strava-poster
Create a poster-sized image to print showing my strava rides superimposed on a map.

# Roadmap

| Title | User Story & Context | Solution Guidance (Technical / Design / Architecture / Constraints)  | Acceptance Criteria (BDD / Gherkin) |
| :---- | :---- | :---- | :---- |
| **Hello World API call** | **As a** developer,  **I want** to call the Geoapify API using POST and save a static image locally,  **so that** I can verify my network, API key, python setup (including separation of logic and configuration) **Context:** Verifying we can read the source data before trying to map it. | **API** Make an HTTP POST call to the Geoapify ‘Static Maps’ API with \`Content-Type: application/json\` The request payload must match current Geoapify API expectations for POST (https://apidocs.geoapify.com/docs/maps/static/) **Configuration** Separate secrets (e.g. API Key) from the main application logic. store the base URL and other payload parameters in `config.py` **Output Requirements** Save the resulting image as `sprint1_test.png` in a local project directory. log success or failure to console.  **Payload Example (for testing):** `{   "width": 600,   "height": 400,   "scaleFactor": 1,   "style": "klokantech-basic",   "styleCustomization": [     {"color": "#d897c8","layer": "background"},     {"color": "#b7d97b","layer": "landcover_grass"},     {"color": "#38b3db","layer": "water"},     {"color": "#38b3db","layer": "waterway-tunnel"},     {"color": "#38b3db","layer": "waterway"}   ] }` *(Note: this is treated as a reference example, not a mandated fixed payload unless you want it to be.)* | **Scenario: Basic Connectivity**  Given a valid API key is provided in `config.py` When I run the script Then a file named `sprint1_test.png` is created And the file is a valid image (non-zero bytes, readable format) And the console logs a success message **Scenario: Invalid API Key**  Given an invalid API key is present  When I run the script  Then no image file is created  And the console logs an “API Authentication Failed” message **Scenario: Network Error**  Given the API endpoint is unreachable  When I run the script  Then the console logs a “Connection Failure”  And the script exits gracefully without creating the file |
| **Data Downloader** | **As a** developer,  **I want** to parse a local or remote `.geojson` file, **so that** the application has a validated data structure to send to the map service. | Data Source A GeoJSON source location (local file path or HTTP URL) is specified in `config.py` A URL you can use for testing: [`https://storage.googleapis.com/cycle2025/cycle_2025_small.geojson`](https://storage.googleapis.com/cycle2025/cycle_2025.geojson) Supported Input Types: `.geojson` files via local filesystem, HTTPS request Output: Log to console evidence of the downloaded file (e.g. MIME Type and file size) Error Handling Requirements missing file network failure invalid JSON wrong content type (HTML, text, etc.) | **Scenario: Fetch Valid GeoJSON (Local File)** Given the file path in `config.py` points to an existing local `.geojson` file  When the script runs  Then the system loads the file successfully  And the parsed object contains `"type": "FeatureCollection"`  **Scenario: Fetch valid GeoJSON** Given the URL in `config.py` points to a valid `.geojson` file  When the fetch action completes  Then the system should hold a parsed JSON object in memory  And the object should contain `"type": "FeatureCollection"` **Scenario: Network/Access Error**  Given the URL points to a non-existent or unreachable file When the fetch action executes Then the console logs “Connection Failure” And the system does not attempt to parse a response **Scenario: Unsupported MIME Type** Given the remote server responds with any content type other than JSON When the script runs Then the console logs “Unsupported Content Type” And parsing is skipped **Scenario: Invalid JSON Format** Given the source returns HTML, plaintext, or syntactically invalid JSON When the system attempts to parse it Then the console logs “Parsing Error” And no in-memory object is created |
| **Generate custom image (MVP)** | **As a** developer, **I want** to send the unified payload via POST, **so that** I can generate a map image with custom geographic data | **Request Format** • payload includes: geojson from downloaded file (new in this sprint), and the previously defined parameters **Output** • response image saved as \`output.png\` • Log success or error **Error Handling** • Detect HTTP errors, invalid responses, malformed payload | **Scenario: Valid POST Submission** Given a valid payload When the POST request is sent Then the payload should contain the full JSON And a 200 OK image should be saved as \`output.png\` **Scenario: Invalid Payload** Given malformed JSON When the POST request is sent Then the API returns an error And no image is saved  |
| **Image Style Controls (CLI)** | **As a** CLI user, **I want** to customize map style and image resolution via  configuration, **so that** I can change output without editing code. | **Configuration** • the app’s logic reads config.py for the  following Image parameters:   `"width": 800`  \<\!--Range:  0-4000 \--\>   `"height": 600`  \<\!--Range:  0-4000 \--\>   `"scaleFactor": 2`  \<\!--Range:  1-2 \--\>   `"style": "klokantech-basic"<!-- klokantech-basic, osm-liberty, osm-bright, osm-bright-grey, toner-grey, positron  → ` • the app’s logic reads config.py for the  following Map Style Customization parameters:   `"styleCustomization": [     {"color": "#d897c8","layer": "background"},     {"color": "#b7d97b","layer": "landcover_grass"},     {"color": "#38b3db","layer": "water"},     {"color": "#38b3db","layer": "waterway-tunnel"},     {"color": "#38b3db","layer": "waterway"}   ]` **Payload** • payload includes geojson and parameters **Output** • Image matches configured parameters | **Scenario: Custom Styling From Configuration** Given parameters and values are specified in config.py When the payload is assembled Then it includes those values And the output image reflects those parameters **Scenario: Default Values** Given config omits parameters and/or values When payload is assembled Then it does not contain that parameter |
| **Web Deployment (Flask/Django)** | **As a** developer, **I want** to wrap the CLI logic in a web interface, **so that** the logic can be accessed from a browser. | **Web Endpoint** • Flask/Django **UI** • Simple form: URL/file input and submit • Visible log panel **Logging** • Shows same messages as CLI | **Scenario: Web Access Works** Given the app is deployed When I visit its URL Then the page loads without errors **Scenario: Generate Map via Web** Given the app’s URL When I submit the form Then the image is returned and displays in the browser **Scenario: Visible Logs** Given the app is deployed When any activity happens (I visit its URL, or submit the form) Then logs appear in the UI |
| **Web App UX: Inputs & Responsive Layout** | **As a** user, **I want** to upload a file or provide a URL, and view results on any screen size. | **Input Sources** • Local File, URL **Responsive Layout** • Image scales proportionally with screen resize • Max width: 100% | **Scenario: GEOJSON Local Upload** Given I choose “Local File” When I upload a \`.geojson\` Then it is accepted **Scenario: GEOJSON URL Input** Given “URL” mode is selected When I paste a valid link Then it is accepted **Scenario: Responsive Layout** Given an image is displayed When I resize the window Then the image scales without horizontal scrolling |
| **Real-Time Payload Visibility** | **As a** developer, **I want** the user to be able to see and copy the unified JSON payload that is updated in real-time, **so that** I can debug before sending requests. | **Live JSON Preview** • Always visible in an unobtrusive way • Updates instantly on any input change, mode switch, or file load | **Scenario: Real-Time JSON Updates** Given JSON preview is visible When any parameter changes Then it updates instantly |
| **Web App UX: Customize Image** | **As a** user, **I want** the ability to override the default ‘image’ settings (width, height, scaleFactor, map style)  **so that** I can customize the downloaded image to my liking. | For each of these parameters, enabled form controls show the default values `"width" "height" "scaleFactor" "style": "klokantech-basic"` | **Scenario: Default** Given the page loads Then all Image controls show default values from config.py (or blank if they do not appear in config.py) And the Image controls are enabled And the payload includes the Image parameters |
| **Customize  Camera**  | **As a** user, **I want** the ability to override the default ‘camera’ settings (angle, rotation, zoom, location)  **so that** I can customize the map to my liking. | **‘Camera’ config parameters:**   `"zoom": 12 <!--Range:  1-22 -->   "pitch": 45  <!--Range:  0-60 -->   "bearing": 160 <!--Range:  0-359 -->   "center": { "lon": , "lat":  } <!-- centroid computed when the .geojson file finishes loading -->`  **Default Mode** • for each of these parameters, disabled form controls show the default or calculated values  • Payload does not include the new parameters **Customize Camera Mode** • form controls become editable **•** Payload includes the new parameters | **Scenario: Default mode** Given the page loads Then all form controls show default values from config.py (or blank if they do not appear in config.py) And the Camera controls are disabled And the payload excludes the Camera parameters **Scenario: GEOJSON parsed** Given geojson successfully parsed Then Center Lon and Center Lat is calculated and the corresponding controls show the calculated centroid value **Scenario: Customize Camera model** When I enable Manual Mode Then new fields are editable And payload includes Camera parameters |
| **Custom Hourglass** | **As a** user **I want** to know when the system is waiting for the API to respond **so that** I can stop wondering if something went wrong. As a developer I want to gently entertain the user while they wait for the API response so that the system embodies a touch of whimsy.. | Between the ‘submit’ action and the API Response display one of the following moving gif at random:  https://cdn.pixabay.com/animation/2024/08/28/06/14/06-14-30-578\_512.gif  https://cdn.pixabay.com/animation/2025/10/28/00/55/00-55-31-860\_512.gif  https://cdn.pixabay.com/animation/2023/05/28/18/06/18-06-05-72\_512.gif  https://cdn.pixabay.com/animation/2023/06/02/20/22/20-22-42-964\_512.gif  https://cdn.pixabay.com/animation/2024/07/28/17/36/17-36-12-526\_512.gif  https://cdn.pixabay.com/animation/2023/05/13/17/24/17-24-48-12\_512.gif  with one of the following messages at random: “Just gearing up ….” “Please wait… things are spinning up.” “Back after this brief … brake.” “Coasting through the final stretch.” “Stay tuned… progress is in motion.” “Give us a sec to find our cadence.” Download them to the repository if that makes more sense to you. | **Scenario: custom hourglass** Given the user is waiting for a form response When the API has not yet responded Then a moving gif is displayed **Scenario: Default** Given an API call has been made When the API responds with an error or success Then the hourglass gif and message should no longer display |
